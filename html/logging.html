

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Logging &mdash; Yaybu v0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Yaybu v0.1 documentation" href="index.html" />
    <link rel="next" title="Resources" href="resources.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="resources.html" title="Resources"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Yaybu v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="logging">
<h1>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h1>
<p>Yaybu produces two different classes of log output, one suited for audit
trails that by default is written to syslog. The other is output to the
console by default and provides something suitable to be reviewed once a
change has been completed to ensure the change is acceptable.</p>
<div class="section" id="audit-trail">
<h2>Audit trail<a class="headerlink" href="#audit-trail" title="Permalink to this headline">¶</a></h2>
<p>By default Yaybu logs all activity to syslog using facility <em>local2</em>. The following log levels are used:</p>
<blockquote>
<div><dl class="docutils">
<dt><em>Debug</em></dt>
<dd>Internal messages from Yaybu useful for debugging Yaybu itself</dd>
<dt><em>Info</em></dt>
<dd>Messages such as file diffs for changed files (which might be bulky) which can be excluded if you wish
Information on non-default policies fired by events</dd>
<dt><em>Warning</em></dt>
<dd>Any commands executed to change the state of the filesystem, for example chmod. Also activities that change the contents of files, but not the contents just the event.</dd>
<dt><em>Critical</em></dt>
<dd>Anything that causes Yaybu to terminate abnormally, presumably leaving the system in an erroneous state. Correcting the configuration and re-running Yaybu would be a normal response.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="post-change-review">
<h2>Post change review<a class="headerlink" href="#post-change-review" title="Permalink to this headline">¶</a></h2>
<p>In addition Yaybu can provide information to the console or to file from a
specific run. It is expected that after executing Yaybu an administrator will
wish to consult a changelog as a manual step to verify correct execution.</p>
<p>The log is therefore formatted for easy review, rather than long term audit
trailling - use the syslog facility for this, as described above.</p>
<p>This log can be produced in text and/or html format. These logs can be written
to file, or to the console.</p>
<p>This log indicates the processing of resources, useful informational messages
about processing decisions.  You can configure the following aspects of this log:</p>
<blockquote>
<div><ul class="simple">
<li>using the <cite>-v</cite> switch you can show even resources that are not changed</li>
<li>using the <cite>-vv</cite> switch you can show informational messages about decisions taken and routine non-system-affecting parts of execution (such as file backup taken before change)</li>
</ul>
</div></blockquote>
<p>Default example output is below:</p>
<div class="highlight-python"><pre>/------------------------------- Package[python] -------------------------------
|====&gt; apt-get install -q -y python
\-------------------------------------------------------------------------------</pre>
</div>
<p>If the log level is verbose you would instead see:</p>
<div class="highlight-python"><pre>/------------------------------- Package[python] -------------------------------
|====&gt; apt-get install -q -y python
| ---- stdout follows ----
| Reading package lists...
| Building dependency tree...
| python is already the newest version.
| 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
| ---- stdout ends ----
\-------------------------------------------------------------------------------</pre>
</div>
</div>
<div class="section" id="invocation-options-related-to-logging">
<h2>Invocation options related to logging<a class="headerlink" href="#invocation-options-related-to-logging" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt><em>-d / &#8211;debug</em></dt>
<dd>switch all logging to maximum, and write out to the console</dd>
<dt><em>-h / &#8211;html</em></dt>
<dd>Instead of writing progress information to the console, write an html progress log to this file.&#8221;</dd>
<dt><em>-l / &#8211;logfile</em></dt>
<dd>The filename to write the audit log to, instead of syslog. Note: the standard console log will still be written to the console.</dd>
<dt><em>-v / &#8211;verbose</em></dt>
<dd>Write additional informational messages to the console log. repeat for even more verbosity.</dd>
<dt><em>&#8211;log-facility</em></dt>
<dd>the syslog local facility number to which to write the audit trail</dd>
<dt><em>&#8211;log-level</em></dt>
<dd>the minimum log level to write to the audit trail</dd>
</dl>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Logging</a><ul>
<li><a class="reference internal" href="#audit-trail">Audit trail</a></li>
<li><a class="reference internal" href="#post-change-review">Post change review</a></li>
<li><a class="reference internal" href="#invocation-options-related-to-logging">Invocation options related to logging</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="resources.html"
                        title="next chapter">Resources</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/logging.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="resources.html" title="Resources"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             >previous</a> |</li>
        <li><a href="index.html">Yaybu v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, John Carr, Doug Winter.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>